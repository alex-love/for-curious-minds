document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".mobile-menu-toggle"),t=document.querySelector(".nav-list");e&&t&&e.addEventListener("click",function(){t.classList.toggle("nav-open"),e.classList.toggle("is-active")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});const n=document.querySelector(".post-content");if(n){const t=n.textContent,s=t.split(/\s+/).length,o=Math.ceil(s/200),e=document.querySelector(".post-reading-time");e&&(e.textContent=`${o} min read`)}const i=window.location.pathname,a=document.querySelectorAll(".nav-link");if(a.forEach(e=>{e.getAttribute("href")===i&&e.classList.add("active")}),"IntersectionObserver"in window){const e=new IntersectionObserver((t)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}document.querySelectorAll("pre code").forEach(e=>{const t=document.createElement("button");t.className="copy-button",t.textContent="Copy",t.setAttribute("aria-label","Copy code to clipboard"),t.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(e.textContent),t.textContent="Copied!",setTimeout(()=>{t.textContent="Copy"},2e3)}catch(e){console.error("Failed to copy: ",e),t.textContent="Failed"}});const n=e.parentElement;n.style.position="relative",n.appendChild(t)});const s=document.querySelector(".search-input");s&&s.addEventListener("input",function(e){const t=e.target.value.toLowerCase(),n=document.querySelectorAll(".searchable-item");n.forEach(e=>{const n=e.textContent.toLowerCase();n.includes(t)?e.style.display="block":e.style.display="none"})});const o=document.createElement("style");o.textContent=`
        .copy-button {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        pre:hover .copy-button {
            opacity: 1;
        }
        
        .nav-open {
            display: flex !important;
            flex-direction: column;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-primary);
            border-top: 1px solid var(--border-color);
            padding: var(--space-lg);
            box-shadow: var(--shadow-lg);
        }
        
        .is-active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .is-active .hamburger-line:nth-child(2) {
            opacity: 0;
        }
        
        .is-active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
    `,document.head.appendChild(o)})